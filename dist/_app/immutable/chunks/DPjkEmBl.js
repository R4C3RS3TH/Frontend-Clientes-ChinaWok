import{f as h,e as J,a as p,c as it}from"./Bvtvaf-4.js";import"./W2UfPBHU.js";import{c as nt}from"./BABsFuV9.js";import{W as lt,p as dt,l as K,b as N,m as Q,am as x,d as ct,c as r,s as d,g as y,r as o,t as k,u as E,a as vt,ap as ft}from"./CwnyM7B6.js";import{s as u}from"./Dy0Yr3Eh.js";import{i as C}from"./C4m43_V4.js";import{s as I}from"./BVxk0ZfD.js";import{s as pt}from"./C2ZrNjat.js";import{p as ut,s as mt}from"./CdEA5IGF.js";import{i as gt}from"./DJMlumk-.js";import{p as c}from"./DBC0mXjD.js";import{c as xt,a as ht}from"./6jeJ50EK.js";function bt(A,a){var i=A.$$events?.[a.type],b=lt(i)?i.slice():i==null?[]:[i];for(var l of b)l.call(this,a)}var _t=h('<span class="absolute top-2 left-2 rounded-full bg-red-600 px-2.5 py-1 text-xs font-bold text-white shadow-sm">Agotado</span>'),wt=h('<span class="absolute top-2 left-2 rounded-full bg-orange-500 px-2.5 py-1 text-xs font-bold text-white shadow-sm"> </span>'),yt=h('<span class="rounded bg-red-600 px-1 py-0.5 text-[10px] font-bold text-white"> </span>'),kt=h('<div class="flex items-center gap-2 text-xs"><span class="text-gray-400 line-through"> </span> <!></div>'),Ct=h('<div class="group relative flex flex-col overflow-hidden rounded-xl bg-white shadow-sm transition-all hover:shadow-md"><a class="contents"><div class="relative aspect-[4/3] w-full overflow-hidden bg-gray-100"><img class="h-full w-full object-cover transition-transform duration-300 group-hover:scale-105"/> <button class="absolute top-2 right-2 z-10 rounded-full bg-white p-1.5 text-gray-400 shadow-sm transition-colors hover:text-red-500" aria-label="Agregar a favoritos"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="h-5 w-5"><path stroke-linecap="round" stroke-linejoin="round" d="M21 8.25c0-2.485-2.099-4.5-4.688-4.5-1.935 0-3.597 1.126-4.312 2.733-.715-1.607-2.377-2.733-4.313-2.733C5.1 3.75 3 5.765 3 8.25c0 7.22 9 12 9 12s9-4.78 9-12Z"></path></svg></button> <!></div> <div class="flex flex-1 flex-col p-4"><h3 class="mb-1 line-clamp-2 text-sm font-bold text-gray-900"> </h3> <p class="mb-3 line-clamp-2 text-xs text-gray-500"> </p> <div class="mt-auto flex items-end justify-between"><div class="flex flex-col"><!> <span class="text-lg font-bold text-gray-900"> </span></div> <button aria-label="Agregar al carrito"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" class="h-5 w-5"><path stroke-linecap="round" stroke-linejoin="round" d="M12 4.5v15m7.5-7.5h-15"></path></svg></button></div></div></a></div>');function Et(A,a){dt(a,!1);const i=Q(),b=Q();let l=c(a,"id",8,""),_=c(a,"nombre",8),L=c(a,"descripcion",8),w=c(a,"precio",8),S=c(a,"precioAnterior",8,void 0),R=c(a,"descuento",8,void 0),j=c(a,"imagenUrl",8),n=c(a,"stock",8,void 0);const V=nt();function X(t){t.preventDefault(),t.stopPropagation(),xt.update(e=>e.find(s=>s.id===l())?e.map(s=>s.id===l()?{...s,quantity:s.quantity+1}:s):[...e,{id:l(),nombre:_(),descripcion:L(),precio:w(),imagenUrl:j(),stock:n(),quantity:1}]),ht.set(!0),V("add",{id:l(),nombre:_(),precio:w(),imagenUrl:j()})}K(()=>x(n()),()=>{N(i,n()!==void 0&&n()<=0)}),K(()=>x(n()),()=>{N(b,n()!==void 0&&n()>0&&n()<=5)}),ct(),gt();var U=Ct(),M=r(U),q=r(M),D=r(q),T=d(D,2),Y=d(T,2);{var $=t=>{var e=_t();p(t,e)},tt=t=>{var e=it(),f=ft(e);{var s=m=>{var g=wt(),v=r(g);o(g),k(()=>u(v,`Ãšltimas ${n()??""} unidades`)),p(m,g)};C(f,m=>{y(b)&&m(s)},!0)}p(t,e)};C(Y,t=>{y(i)?t($):t(tt,!1)})}o(q);var W=d(q,2),O=r(W),et=r(O,!0);o(O);var z=d(O,2),at=r(z,!0);o(z);var Z=d(z,2),B=r(Z),G=r(B);{var rt=t=>{var e=kt(),f=r(e),s=r(f);o(f);var m=d(f,2);{var g=v=>{var P=yt(),st=r(P);o(P),k(()=>u(st,`-${R()??""}%`)),p(v,P)};C(m,v=>{R()&&v(g)})}o(e),k(v=>u(s,`S/ ${v??""}`),[()=>(x(S()),E(()=>S().toFixed(2)))]),p(t,e)};C(G,t=>{S()&&t(rt)})}var H=d(G,2),ot=r(H);o(H),o(B);var F=d(B,2);o(Z),o(W),o(M),o(U),k((t,e)=>{I(M,"href",`/producto/${t??""}`),I(D,"src",j()),I(D,"alt",_()),u(et,_()),u(at,L()),u(ot,`S/ ${e??""}`),pt(F,1,`z-10 flex h-8 w-8 items-center justify-center rounded-full transition-colors ${y(i)?"cursor-not-allowed bg-gray-300 text-gray-500":"bg-green-600 text-white hover:bg-green-700"}`),F.disabled=y(i)},[()=>(x(l()),E(()=>encodeURIComponent(l().toString()))),()=>(x(w()),E(()=>w().toFixed(2)))]),J("click",T,ut(mt(function(t){bt.call(this,a,t)}))),J("click",F,X),p(A,U),vt()}export{Et as M};
