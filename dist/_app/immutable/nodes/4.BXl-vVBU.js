import{f as X,e as j,a as y,b as Y,t as me}from"../chunks/Bvtvaf-4.js";import"../chunks/W2UfPBHU.js";import{o as ve}from"../chunks/BABsFuV9.js";import{as as fe,at as pe,u as be,au as he,C as xe,R as w,av as ye,p as we,s as o,ap as _e,t as ke,g as s,a as Ce,e as ze,c as l,$ as Se,r as i,m as p,aw as Le,b}from"../chunks/CwnyM7B6.js";import{i as F}from"../chunks/C4m43_V4.js";import{h as Me}from"../chunks/DEJnJuWj.js";import{r as _,s as Ee}from"../chunks/BVxk0ZfD.js";import{p as K}from"../chunks/CdEA5IGF.js";import{i as Re}from"../chunks/DJMlumk-.js";import{s as qe,a as Ae}from"../chunks/D1vtHolZ.js";import{W as Ie}from"../chunks/Cbt1J3vM.js";import{u as $e,t as h,b as Q}from"../chunks/6jeJ50EK.js";import{g as Be}from"../chunks/5_Mw-njR.js";function k(e,a,n=a){var c=new WeakSet;fe(e,"input",async g=>{var t=g?e.defaultValue:e.value;if(t=P(e)?D(t):t,n(t),w!==null&&c.add(w),await pe(),t!==(t=a())){var v=e.selectionStart,d=e.selectionEnd,f=e.value.length;if(e.value=t??"",d!==null){var u=e.value.length;v===d&&d===f&&u>f?(e.selectionStart=u,e.selectionEnd=u):(e.selectionStart=v,e.selectionEnd=Math.min(d,u))}}}),(xe&&e.defaultValue!==e.value||be(a)==null&&e.value)&&(n(P(e)?D(e.value):e.value),w!==null&&c.add(w)),he(()=>{var g=a();if(e===document.activeElement){var t=ye??w;if(c.has(t))return}P(e)&&g===D(e.value)||e.type==="date"&&!g&&!e.value||g!==e.value&&(e.value=g??"")})}function P(e){var a=e.type;return a==="number"||a==="range"}function D(e){return e===""?null:+e}class x{static instance;wsService;isInitialized=!1;constructor(){this.wsService=Ie.getInstance()}static getInstance(){return x.instance||(x.instance=new x),x.instance}initialize(){this.isInitialized||(this.wsService.addListener(a=>{console.log("AuthService received message:",a),this.handleAuthMessage(a)}),this.isInitialized=!0,console.log("Auth service initialized"))}login(a,n){const c={action:"Auth.LoginCliente",data:{email:a,password:n}};console.log("Sending login request:",c),this.wsService.send(c)}register(a){const n={action:"Auth.RegisterCliente",data:a};console.log("Sending register request:",n),this.wsService.send(n)}handleAuthMessage(a){if(a.Detail&&a.Detail.ui){const{action:n,data:c}=a.Detail.ui;n==="AUTH_SUCCESS"&&($e.set(c.user),h.set({message:"Bienvenido!",type:"success"}),Be("/")),n==="AUTH_ERROR"&&h.set({message:c.message||"Error de autenticación",type:"error"})}}}var je=Y('<svg class="h-5 w-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13.875 18.825A10.05 10.05 0 0112 19c-4.478 0-8.268-2.943-9.543-7a9.97 9.97 0 011.563-3.029m5.858.908a3 3 0 114.243 4.243M9.878 9.878l4.242 4.242M9.88 9.88l-3.29-3.29m7.532 7.532l3.29 3.29M3 3l3.59 3.59m0 0A9.953 9.953 0 0112 5c4.478 0 8.268 2.943 9.543 7a10.025 10.025 0 01-4.132 5.411m0 0L21 21"></path></svg>'),Pe=Y('<svg class="h-5 w-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"></path><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"></path></svg>'),De=X('<span class="flex items-center justify-center gap-2"><svg class="h-5 w-5 animate-spin text-white" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24"><circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle><path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path></svg> Iniciando sesión...</span>'),He=X('<div class="border-b border-gray-200"></div> <div class="mx-auto max-w-6xl bg-gray-50 px-6 py-12"><div class="grid gap-0 overflow-hidden rounded-lg border border-gray-200 bg-white shadow-lg md:grid-cols-2"><div class="border-r-0 border-gray-200 bg-white p-8 md:border-r"><h1 class="mb-6 text-3xl font-bold text-gray-900">Iniciar sesión</h1> <form class="space-y-6"><div><label for="login-email" class="mb-2 block text-sm font-medium text-gray-700">Correo electrónico <span class="text-red-500">*</span></label> <input id="login-email" type="email" placeholder="Ej. nombre@mail.com" required class="w-full rounded-lg border border-gray-300 px-4 py-3 focus:border-green-600 focus:ring-2 focus:ring-green-600/20 focus:outline-none"/></div> <div><label for="login-password" class="mb-2 block text-sm font-medium text-gray-700">Contraseña <span class="text-red-500">*</span></label> <div class="relative"><input id="login-password" placeholder="Aa12345" required class="w-full rounded-lg border border-gray-300 px-4 py-3 pr-12 focus:border-green-600 focus:ring-2 focus:ring-green-600/20 focus:outline-none"/> <button type="button" class="absolute top-1/2 right-3 -translate-y-1/2 text-gray-500 hover:text-gray-700" aria-label="Mostrar contraseña"><!></button></div></div> <div><a href="/recuperar-password" class="text-sm text-green-600 hover:text-green-700">Olvidé mi contraseña</a></div> <button type="submit" class="w-full rounded-lg bg-green-600 px-6 py-3 font-semibold text-white transition-colors hover:bg-green-700 disabled:cursor-not-allowed disabled:opacity-50"><!></button></form></div> <div class="border-l-0 border-gray-200 bg-white p-8 md:border-l"><h1 class="mb-6 text-3xl font-bold text-gray-900">Crear cuenta</h1> <p class="mb-6 text-gray-600">Crea una y aprovecha los beneficios:</p> <ul class="mb-8 space-y-3 text-gray-700"><li class="flex items-start gap-3"><svg class="mt-0.5 h-5 w-5 flex-shrink-0 text-green-600" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"></path></svg> <span>Realiza tus compras de manera más ágil.</span></li> <li class="flex items-start gap-3"><svg class="mt-0.5 h-5 w-5 flex-shrink-0 text-green-600" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"></path></svg> <span>Guarda múltiples direcciones de envío y facturación.</span></li> <li class="flex items-start gap-3"><svg class="mt-0.5 h-5 w-5 flex-shrink-0 text-green-600" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"></path></svg> <span>Realiza el seguimiento a tus compras y revisa tus pedidos realizados.</span></li> <li class="flex items-start gap-3"><svg class="mt-0.5 h-5 w-5 flex-shrink-0 text-green-600" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"></path></svg> <span>Haz una lista de productos favoritos.</span></li></ul> <form class="space-y-6"><div><label for="register-name" class="mb-2 block text-sm font-medium text-gray-700">Nombre completo <span class="text-red-500">*</span></label> <input id="register-name" type="text" placeholder="Ej. Juan Pérez" required class="w-full rounded-lg border border-gray-300 px-4 py-3 focus:border-green-600 focus:ring-2 focus:ring-green-600/20 focus:outline-none"/></div> <div><label for="register-email" class="mb-2 block text-sm font-medium text-gray-700">Correo electrónico <span class="text-red-500">*</span></label> <input id="register-email" type="email" placeholder="Ej. nombre@mail.com" required class="w-full rounded-lg border border-gray-300 px-4 py-3 focus:border-green-600 focus:ring-2 focus:ring-green-600/20 focus:outline-none"/></div> <div><label for="register-password" class="mb-2 block text-sm font-medium text-gray-700">Contraseña <span class="text-red-500">*</span></label> <input id="register-password" type="password" placeholder="Mínimo 8 caracteres" required minlength="8" class="w-full rounded-lg border border-gray-300 px-4 py-3 focus:border-green-600 focus:ring-2 focus:ring-green-600/20 focus:outline-none"/></div> <button type="submit" class="w-full rounded-lg bg-green-600 px-6 py-3 font-semibold text-white transition-colors hover:bg-green-700">Crear cuenta</button></form></div></div></div>',1);function Ye(e,a){we(a,!1);const n=()=>Ae(Q,"$isRequestLoading",c),[c,g]=qe();let t=p(!1),v=p(""),d=p(""),f=p(""),u=p(""),S=p(""),C;ve(()=>{C=x.getInstance(),C.initialize()});const ee=()=>{b(t,!s(t))},re=r=>{const de=/[A-Z]/.test(r),ue=/[0-9]/.test(r),ge=/[!@#$%^&*(),.?":{}|<>]/.test(r);return r.length<8?(h.set({message:"La contraseña debe tener al menos 8 caracteres.",type:"error"}),!1):de?ue?ge?!0:(h.set({message:"La contraseña debe tener al menos un carácter especial (!@#$%^&*).",type:"error"}),!1):(h.set({message:"La contraseña debe tener al menos un número.",type:"error"}),!1):(h.set({message:"La contraseña debe tener al menos una letra mayúscula.",type:"error"}),!1)},ae=()=>{!s(v)||!s(d)||(Q.set(!0),C.login(s(v),s(d)))},se=()=>{re(s(u))&&C.register({name:s(S),email:s(f),password:s(u)})};Re();var H=He();Me("1x05zx6",r=>{ze(()=>{Se.title="Inicia sesión o crea tu cuenta - Chinawok"})});var U=o(_e(H),2),N=l(U),L=l(N),M=o(l(L),2),E=l(M),V=o(l(E),2);_(V),i(E);var R=o(E,2),W=o(l(R),2),z=l(W);_(z);var q=o(z,2),te=l(q);{var oe=r=>{var m=je();y(r,m)},le=r=>{var m=Pe();y(r,m)};F(te,r=>{s(t)?r(oe):r(le,!1)})}i(q),i(W),i(R);var A=o(R,4),ie=l(A);{var ne=r=>{var m=De();y(r,m)},ce=r=>{var m=me("Iniciar sesión");y(r,m)};F(ie,r=>{n()?r(ne):r(ce,!1)})}i(A),i(M),i(L);var O=o(L,2),I=o(l(O),6),$=l(I),T=o(l($),2);_(T),i($);var B=o($,2),G=o(l(B),2);_(G),i(B);var J=o(B,2),Z=o(l(J),2);_(Z),i(J),Le(2),i(I),i(O),i(N),i(U),ke(()=>{Ee(z,"type",s(t)?"text":"password"),A.disabled=n()}),k(V,()=>s(v),r=>b(v,r)),k(z,()=>s(d),r=>b(d,r)),j("click",q,ee),j("submit",M,K(ae)),k(T,()=>s(S),r=>b(S,r)),k(G,()=>s(f),r=>b(f,r)),k(Z,()=>s(u),r=>b(u,r)),j("submit",I,K(se)),y(e,H),Ce(),g()}export{Ye as component};
